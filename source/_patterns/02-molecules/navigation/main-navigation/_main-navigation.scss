/*------------------------------------------------------------------------------
Molecule: Main navigation/ultimenu custom styles
--------------------------------------------------------------------------------
Active link trail
------------------------------------------------------------------------------*/
.main-navigation,
#block-system-main-menu {
  @include breakpoint($medium) {
    width: 100vw;
    height: inherit;
    border-top: none;
  }

  grid-area: main-nav;
  border-top: solid var(--blue--darker--40) var(--border-width--sm);
  font-family: var(--font-family--condensed);
  font-weight: var(--font-weight--regular);

  & > .menu,
  .ultimenu--horizontal {
    @include blue-bg;

    display: flex;
    flex-flow: row wrap;
    margin: 0;
    padding-left: 0;

    & > li {
      @include breakpoint($medium) {
        grid-template-columns: 1fr var(--icon-size--sm);
        width: inherit;
        border-bottom: none;
      }

      display: grid;
      grid-template-areas:
        "link icon"
        "flyout flyout";
      grid-template-columns: 1fr var(--toggle-size--sm);
      grid-template-rows: auto auto;
      width: 100%;
      border-bottom: var(--border-width--sm) solid var(--blue--darker--40);
      border-left: none;

      & > a {
        position: relative;
        display: grid;
        grid-column: 1 / span all;
        grid-row: 1 / span 1;
        align-items: center;
        width: 100%;
        margin: 0;
        padding: var(--space--sm);
        transition: var(--transition-speed--md) all var(--ease--standard);
        text-align: left;
        white-space: normal;
        text-decoration: none;
        line-height: 1;

        &:focus {
          outline-color: var(--black);
          outline-offset: calc(-1 * var(--border-width--md));
        }
      }

      .expand-icon {
        @include breakpoint($medium) {
          display: none;
        }

        display: flex;
        grid-area: icon;
        -ms-grid-column: 2;
        -ms-grid-column-span: 1;
        align-items: center;
        justify-content: center;
        width: 100%;
        height: 100%;
        color: var(--white);
        border: none;
        font-size: var(--icon-size--sm);

        &.desktop {
          @include breakpoint($medium) {
            position: relative;
            right: var(--space--xs);
            display: flex;
          }

          display: none;
        }

        &.mobile {
          @include breakpoint($medium) {
            display: none;
          }
        }
      }

      /*------------------------------------------------------------------------
      Active link trail
      ------------------------------------------------------------------------*/
      /* Active trail / top-level item ---------------------------------------*/
      &.is-active-trail {
        a {
          @include breakpoint($medium) {
            border-bottom: solid var(--border-width--lg)
              var(--blue--lighter--60);
            border-left: none;
          }

          border-left: solid var(--border-width--lg) var(--blue--lighter--60);
        }
      }

      /* Active menu item ----------------------------------------------------*/
      &.menu-item--active-page {
        a {
          color: var(--dark-blue--darker--60);
          background-color: var(--blue--lighter--60);
          font-weight: $font-weight--bold;
        }
      }
    }
  }
}

#block-system-main-menu ul ul {
  display: none; // hide nested menus on non ultimenu main nav blocks
}

.font--dyslexia-friendly {
  .main-navigation,
  #block-system-main-menu {
    font-family: var(--font--dyslexia-friendly);
  }
}

.font--hyperlegible {
  .main-navigation,
  #block-system-main-menu {
    font-family: var(--font--hyperlegible);
  }
}
