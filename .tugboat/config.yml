services:
  apache:
    image: tugboatqa/httpd:2.4
    default: true
  node:
    image: tugboatqa/node:latest
  php:
    image: tugboatqa/php:7.3-apache

commands:
      init:
        - npm install gulp
        - ./patternlab-install.sh
        - ./patternlab-provision.sh
        - php pattern-lab/core/console --generate
        - ln -snf "${TUGBOAT_ROOT}/pattern-lab/public" "${DOCROOT}"
      update:
        - gulp patternlab
      build:
        - gulp patternlab
        - php pattern-lab/core/console --generate
